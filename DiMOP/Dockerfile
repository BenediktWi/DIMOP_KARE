FROM ubuntu:20.04

# System-Updates und essentielle Pakete installieren
RUN apt update && apt upgrade -y
RUN DEBIAN_FRONTEND="noninteractive" apt install -y git nodejs npm python3 python3-pip

# Pipenv installieren
RUN pip3 install pipenv

# Frontend-Abh채ngigkeiten installieren und builden
WORKDIR /backend/frontend
RUN rm -rf node_modules
RUN npm install
RUN npm run build

# Backend-Abh채ngigkeiten installieren
WORKDIR /backend
RUN pipenv install

# Container-Startbefehl
CMD ["pipenv", "run", "python", "main.py"]

# Port f체r Flask oder 채hnliche Server
EXPOSE 5000
